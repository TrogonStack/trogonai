# ── Slack (slack-bot) ────────────────────────────────────────────────────────

# Required: Slack bot token (xoxb-...)
SLACK_BOT_TOKEN=xoxb-

# Required: Slack app-level token for Socket Mode (xapp-...)
SLACK_APP_TOKEN=xapp-

# Optional: Bot user ID (e.g. U01234ABCDE) — used to prevent the bot from
# reacting to its own messages.
SLACK_BOT_USER_ID=

# Optional: When "false" or "0", the bot responds to all channel messages
# without requiring an @mention. DMs always pass through regardless.
# Default: true  (mirrors OpenClaw requireMention)
SLACK_MENTION_GATING=true

# Optional: Per-channel overrides (comma-separated channel IDs).
# SLACK_MENTION_GATING_CHANNELS: gating ON even when SLACK_MENTION_GATING=false
# SLACK_NO_MENTION_CHANNELS: gating OFF even when SLACK_MENTION_GATING=true
# SLACK_MENTION_GATING_CHANNELS=C01234ABCDE,C56789FGHIJ
# SLACK_NO_MENTION_CHANNELS=C01234ABCDE

# Optional: When "true" or "1", messages from other bots are forwarded to NATS.
# Default: false
SLACK_ALLOW_BOTS=false

# Optional: Slack signing secret for verifying Events API webhook requests.
# When set, all requests to /slack/events are HMAC-SHA256 verified.
# SLACK_SIGNING_SECRET=

# Optional: Port for the raw Events API HTTP webhook server (pin events).
# Default: 3001
SLACK_EVENTS_PORT=3001

# Optional: Health check HTTP port for slack-bot.
# Default: 8080
HEALTH_PORT=8080

# ── Slack (slack-agent) ───────────────────────────────────────────────────────

# Optional: Emoji shortcode (no colons) to add while processing a message,
# removed once the response is delivered. Leave empty to disable.
# Example: eyes
SLACK_ACK_REACTION=eyes

# Optional: Threading mode.
# Values: "off" (default) | "first" | "all"
SLACK_REPLY_TO_MODE=first

# Optional: Per-chat-type threading overrides.
# SLACK_REPLY_TO_MODE_DM=off    # override for direct messages
# SLACK_REPLY_TO_MODE_GROUP=off # override for group DMs

# Optional: Message posted to a channel when a new member joins.
# Leave empty to disable.
# SLACK_WELCOME_MESSAGE=Welcome to the channel! I'm here to help.

# Optional: Controls who can send the bot direct messages.
# Values: "open" (default, anyone may DM) | "disabled" (all DMs are silently ignored).
# SLACK_DM_POLICY=open

# Optional: Comma-separated list of Slack channel IDs the bot will process.
# When set, only messages from listed channels are handled. DMs always pass through.
# Leave empty (default) to handle messages from all channels.
# SLACK_CHANNEL_ALLOWLIST=C01234ABCDE,C56789FGHIJ

# Optional: Health check HTTP port for slack-agent.
# Default: 8081
# HEALTH_PORT=8081

# ── Claude / Anthropic (slack-agent) ─────────────────────────────────────────

# Required for AI responses: Anthropic API key
ANTHROPIC_API_KEY=sk-ant-

# Optional: Claude model to use.
# Default: claude-sonnet-4-6
CLAUDE_MODEL=claude-sonnet-4-6

# Optional: Maximum output tokens per response.
# Default: 8192
CLAUDE_MAX_TOKENS=8192

# Optional: System prompt — choose one of the two options below.
# Inline text (good for short prompts):
CLAUDE_SYSTEM_PROMPT=You are a helpful assistant.
# Path to a file containing the prompt (takes precedence when both are set):
# CLAUDE_SYSTEM_PROMPT_FILE=/run/secrets/prompt.txt

# Optional: Maximum number of messages to retain in conversation history
# per session (user + assistant messages count together).
# Default: 40
CLAUDE_MAX_HISTORY=40

# Optional: Maximum total characters in history before truncating old messages.
# Uses chars/4 as a token proxy. 0 = disabled (default). ~200000 ≈ 50K tokens.
CLAUDE_MAX_HISTORY_CHARS=0

# Optional: Thread history seeding — number of messages to load from the
# parent channel session when a new thread starts.
# Default: 0 (disabled)
THREAD_INITIAL_HISTORY_LIMIT=0

# Optional: When "true" or "1", messages from other bots are forwarded.
# Default: false
# SLACK_ALLOW_BOTS=false

# ── NATS ──────────────────────────────────────────────────────────────────────

# Required: NATS server URL
NATS_URL=nats://localhost:4222

# Optional: NATS authentication token (mutually exclusive with NATS_CREDS)
NATS_TOKEN=

# Optional: Path to a NATS credentials file (.creds)
NATS_CREDS=
